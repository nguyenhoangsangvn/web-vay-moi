<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Debug API - FinTech Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>body{background:#f0f4f8;font-family:sans-serif} .debug-box{background:#1e293b;color:#4ade80;padding:15px;font-family:monospace;font-size:11px;white-space:pre-wrap;word-break:break-all;border:2px solid #ef4444;margin:20px;border-radius:10px;}</style>
</head>
<body>

    <div class="max-w-4xl mx-auto mt-5">
        <h2 class="text-center text-red-600 font-bold text-xl uppercase mb-2">‚ö†Ô∏è CH·∫æ ƒê·ªò SOI D·ªÆ LI·ªÜU G·ªêC</h2>
        <p class="text-center text-sm text-gray-600 mb-2">Ch·ª•p m√†n h√¨nh c√°i khung ƒëen b√™n d∆∞·ªõi g·ª≠i cho tui nh√© üëá</p>
        <div id="raw-json" class="debug-box">ƒêang t·∫£i d·ªØ li·ªáu th√¥ t·ª´ API... Vui l√≤ng ƒë·ª£i...</div>
    </div>

    <div id="app-container" class="max-w-7xl mx-auto px-4 pb-20 grid grid-cols-1 md:grid-cols-3 gap-4"></div>

    <script>
        // C·∫§U H√åNH API
        const API_URL = 'https://publisher-api.riofintech.net/offer/all?pub_id=28janns&token=hpoRHLinw3JgcQaV6g6SaQ%3D%3D';

        const debugBox = document.getElementById('raw-json');
        const container = document.getElementById('app-container');

        async function fetchApps() {
            try {
                // D√πng Proxy ƒë·ªÉ l√°ch lu·∫≠t CORS
                const proxyUrl = 'https://corsproxy.io/?' + encodeURIComponent(API_URL);
                const response = await fetch(proxyUrl);
                const rawData = await response.json();
                
                // L·∫•y danh s√°ch offer
                // API RioFintech th∆∞·ªùng tr·∫£ v·ªÅ m·∫£ng tr·ª±c ti·∫øp ho·∫∑c n·∫±m trong key 'data'
                let list = Array.isArray(rawData) ? rawData : (rawData.data || []);

                if (list.length > 0) {
                    // 1. IN D·ªÆ LI·ªÜU G·ªêC C·ª¶A TH·∫∞NG ƒê·∫¶U TI√äN RA M√ÄN H√åNH ƒê·ªÇ SOI
                    const firstItem = list[0];
                    debugBox.innerHTML = "D·ªÆ LI·ªÜU C·ª¶A G√ìI VAY ƒê·∫¶U TI√äN:\n\n" + JSON.stringify(firstItem, null, 4);
                    
                    // 2. Render th·ª≠ ra b√™n d∆∞·ªõi
                    renderTest(list);
                } else {
                    debugBox.innerHTML = "L·ªñI: API tr·∫£ v·ªÅ danh s√°ch r·ªóng! \n\nPh·∫£n h·ªìi g·ªëc:\n" + JSON.stringify(rawData, null, 4);
                }

            } catch (error) {
                debugBox.innerHTML = "L·ªñI K·∫æT N·ªêI: " + error.message + "\n\n(H√£y th·ª≠ t·∫Øt Wifi d√πng 4G ho·∫∑c ng∆∞·ª£c l·∫°i)";
            }
        }

        function renderTest(list) {
            container.innerHTML = '';
            list.slice(0, 3).forEach(app => { // Ch·ªâ hi·ªán 3 c√°i test
                // Th·ª≠ t√¨m link ·ªü m·ªçi ng√≥c ng√°ch
                let link = app.tracking_link || app.link || app.url || app.click_url || "KHONG_THAY_LINK";
                let name = app.offer_name || app.name || "No Name";
                
                let btnColor = (link !== "KHONG_THAY_LINK") ? "bg-green-600" : "bg-gray-400";
                let btnText = (link !== "KHONG_THAY_LINK") ? "C√ì LINK NGON" : "M·∫§T LINK";

                container.innerHTML += `
                    <div class="bg-white p-4 rounded shadow">
                        <h3 class="font-bold">${name}</h3>
                        <p class="text-xs text-gray-500 truncate mt-1">Link t√¨m ƒë∆∞·ª£c: ${link}</p>
                        <button class="w-full ${btnColor} text-white font-bold py-2 mt-2 rounded">${btnText}</button>
                    </div>
                `;
            });
        }

        fetchApps();
    </script>
</body>
</html>
